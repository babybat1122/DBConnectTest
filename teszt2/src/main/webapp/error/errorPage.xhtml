<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      >


    <f:metadata>
        <f:event type="preRenderView" listener="#{facesContext.externalContext.response.setStatus(500)}" />
    </f:metadata>

    <h:head>
        <f:facet name="first">
            <meta http-equiv="X-UA-Compatible" content="IE=edge" />
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <link rel="shortcut icon" type="image/x-icon" href="#{request.contextPath}/resources/images/favicon.png" />
        </f:facet>

        <h:outputStylesheet library="webjars" name="font-awesome/6.1.0/css/all.min-jsf.css" />
        <h:outputScript library="webjars" name="font-awesome/6.1.0/js/all.min.js" />


        <h:outputStylesheet name="/css/bevfeld_relative.css"/>
        <!--<script src="../resources/js/clipboard.js"></script>-->

        <h:outputScript library="bevfeld" name="js/clipboard.js" target="head"/>

        <title>
            #{jsfFunctions.appName} - Hiba
        </title>

    </h:head>

    <h:body onload="">

        <c:set var="isDeveloperMode" scope="request" value="#{initParam['javax.faces.PROJECT_STAGE'].equals('Development')}" />
        <p:growl id="growl" showDetail="true" showSummary="true"/>
        <ui:debug hotkey="x" rendered="#{isDeveloperMode}" />

        <div id="content" class="center_content">
            <h:form id="errorPageForm">

                <style type="text/css">
                    .msg {
                        padding: 15px;
                        margin: 20px;
                        border: 1px solid transparent;
                        border-radius: 4px;
                    }
                    .error {
                        color: #a94442;
                        background-color: #f2dede;
                        border-color: red;
                    }
                </style>


                <div class="error msg">
                    <h:outputText value="#{jsfFunctions.appName} Hiba" style="font-size: 32px; font-weight: bolder; color: red" />
                    <br />
                    <h:outputText value="#{eBevallasExceptionHandler.rootExceptionMessage}" rendered="#{not empty eBevallasExceptionHandler.rootExceptionMessage}"  style="font-size: 24px; font-weight: bold"/>
                    <br />
                    <br />
                    <h:outputText value="A(z) '#{jsfFunctions.appName}' alkalmazás futása közben hiba lépett fel." style="font-size: 18px"/>
                    <br/>
                    <h:outputText value="A hibával kapcsolatos technikai részletek az alábbiakban olvashatóak." style="font-size: 18px"/>
                </div>

                <p:separator/>

                <p:panelGrid columns="4" styleClass="noBorderPanelGrid top-aligned-columns">
                    <h:outputText value="Típus:" style="font-weight: bolder;font-size: 15px"/>
                    <h:outputText value="#{eBevallasExceptionHandler.jsfExceptionType}" style="font-size: 15px"/>

                    <h:outputText value="Üzenet:" style="font-weight: bolder;font-size: 15px"/>
                    <h:outputText value="#{eBevallasExceptionHandler.jsfExceptionMessage}" style="font-size: 15px"/>

                    <h:outputText value="Root típus" style="font-weight: bolder;font-size: 15px"/>
                    <h:outputText value="#{eBevallasExceptionHandler.rootExceptionType}" style="font-size: 15px"/>

                    <h:outputText value="Root üzenet" style="font-weight: bolder;font-size: 15px"/>
                    <h:outputText value="#{eBevallasExceptionHandler.rootExceptionMessage}" style="font-size: 15px"/>
                </p:panelGrid>


                <p:separator/>

                <button class="btn">Vágólapra másol</button>
                <script type="text/javascript">
                    var clipboard = new Clipboard('.btn', {
                        target: function () {
                            return document.getElementById("errorPageForm:stackTraceNoHtmlFormat");
                        }
                    });

                    clipboard.on('success', function (e) {
                        alert('A hibajelentés vágólapra másolása megtörtént');
                    });

                    clipboard.on('error', function (e) {
                        alert('Hiba a vágólapra történő másolás közben!');
                        console.log(e);
                    });
                </script>


                <input type="button" onclick="window.location.replace(document.referrer);" value="Vissza"/>


                <br/>

                <pre>
                <h:outputText id="stackTraceNoHtmlFormat"
                              value="#{eBevallasExceptionHandler.jsfFormattedStackTrace}"
                              />
                </pre>


                <p:separator />
                <!--                <p:button outcome="/pages/queries.xhtml"
                                          value="Lekérdezésekhez"
                                          icon="fa fa-meh-o"
                                          rendered="#{eBevallasExceptionHandler.rootExceptionType == 'hu.gov.nav.bevfeld.ebevallas.commons.exception.EBevallasException'}"
                                          />-->


            </h:form>
        </div>

        <f:facet name="last">
            <h:outputStylesheet library="css" name="growl-message-extender.css" />
        </f:facet>

    </h:body>

</html>
